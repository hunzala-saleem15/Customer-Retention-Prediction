{% extends "base.html" %}
{% block content %}
<div class="container">

  <!-- Title -->
  <h2 class="text-center mb-5 animate__animated animate__fadeInDown">
    ðŸ“Š Batch Prediction (CSV Upload)
  </h2>

  <!-- Upload Form -->
  <div class="feature-card animate__animated animate__zoomIn mb-5">
    <form method="POST" enctype="multipart/form-data" class="text-center">
      <div class="mb-3">
        <label for="file" class="form-label fw-bold">Upload CSV File</label>
        <input type="file" id="file" class="form-control" name="file" accept=".csv" required>
        <div class="form-text text-light">Only <code>.csv</code> files are supported</div>
      </div>
      <button class="btn btn-primary px-4 mt-2" type="submit">
        ðŸš€ Upload & Predict
      </button>
    </form>
  </div>

  {% if results %}
  <!-- Results Section -->
  <div class="feature-card animate__animated animate__fadeInUp">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0">âœ… Prediction Results</h5>
      <a href="{{ url_for('batch_download') }}" class="btn btn-success btn-sm">
        â¬‡ Download Excel Report
      </a>
    </div>
    
    <div class="table-responsive" style="max-height:450px; overflow-y:auto;">
      <table class="table table-hover table-bordered align-middle text-center mb-0">
        <thead class="table-dark">
          <tr>
            {% for col in results[0].keys() %}
              <th scope="col">{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for row in results %}
          <tr>
            {% for val in row.values() %}
              <td>{{ val }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
