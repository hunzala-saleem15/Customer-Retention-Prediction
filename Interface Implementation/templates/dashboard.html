{% extends "base.html" %}
{% block content %}
<div class="container py-5">

  <!-- Dashboard Heading -->
  <h2 class="text-center fw-bold text-gradient mb-5 animate__animated animate__fadeInDown">
      ðŸ’¡ Churn Dashboard & Insights
  </h2>

<!-- Metrics Cards -->
<div class="row mb-4 g-3">
  <div class="col-md-3">
    <div class="card h-100 shadow-lg card-metric card-gradient-blue">
      <div class="card-body text-center">
        <i class="bi bi-people-fill display-5 mb-2"></i>
        <h6 class="card-title fw-bold">Total Customers</h6>
        <h3 class="kpi-value">{{ total_customers }}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card h-100 shadow-lg card-metric card-gradient-red">
      <div class="card-body text-center">
        <i class="bi bi-person-x-fill display-5 mb-2"></i>
        <h6 class="card-title fw-bold">Churned</h6>
        <h3 class="kpi-value">{{ churned }}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card h-100 shadow-lg card-metric card-gradient-green">
      <div class="card-body text-center">
        <i class="bi bi-person-check-fill display-5 mb-2"></i>
        <h6 class="card-title fw-bold">Not Churned</h6>
        <h3 class="kpi-value">{{ not_churned }}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card h-100 shadow-lg card-metric card-gradient-orange">
      <div class="card-body text-center">
        <i class="bi bi-percent display-5 mb-2"></i>
        <h6 class="card-title fw-bold">Churn Rate (%)</h6>
        <h3 class="kpi-value">{{ churn_rate }}%</h3>
      </div>
    </div>
  </div>
</div>


  <!-- Charts Grid -->
  <div class="row g-4">
    {% for chart in [chart1, chart2, chart3, chart4, chart5, chart6, chart7, chart8, chart9, chart10] %}
      {% if chart %}
      <div class="col-lg-6 col-md-12">
        <div class="card shadow-lg h-100 animate__animated animate__fadeInUp animate__delay-{{ loop.index }}s hover-shadow">
          <div class="card-body text-center">
            {% autoescape false %}
              {{ chart }}
            {% endautoescape %}
          </div>
          <div class="card-footer text-muted text-center small">
            {% if chart.caption %} {{ chart.caption }} {% endif %}
          </div>
        </div>
      </div>
      {% endif %}
    {% endfor %}
  </div>

</div>

<!-- Animate.css & Bootstrap Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>

{% endblock %}

{% block styles %}
<style>
/* Gradient Text for Dashboard Heading */
.text-gradient {
    background: linear-gradient(90deg, #42a5f5, #81d4fa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
    display: inline-block;
}

/* Metric Card Hover Effects */
.card-metric {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 1rem;
}
.card-metric:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.4);
}

/* Chart Card Hover Effects */
.hover-shadow:hover {
    transform: scale(1.03);
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* Gradient Backgrounds for Metrics Cards with Beautiful Colors */
.card-gradient-blue {
    background: linear-gradient(135deg,#6a11cb,#2575fc);
    color: white;
}
.card-gradient-red {
    background: linear-gradient(135deg,#ff416c,#ff4b2b);
    color: white;
}
.card-gradient-green {
    background: linear-gradient(135deg,#43e97b,#38f9d7);
    color: white;
}
.card-gradient-orange {
    background: linear-gradient(135deg,#f7971e,#ffd200);
    color: white;
}

/* KPI Value Styling */
.kpi-value {
    font-size: 2rem;
    font-weight: bold;
    color: inherit; /* ensures it follows card text color */
}

/* Card Titles & Icons */
.card-title, .card-body i {
    color: inherit;
}

/* Footer Text for Charts */
.card-footer {
    background-color: rgba(0,0,0,0.03);
    border-top: 1px solid rgba(0,0,0,0.1);
}
</style>
{% endblock %}



